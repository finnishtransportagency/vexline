<!DOCTYPE html>
<html>
<head>
    <title>Viitekehysmuunnin</title>
    <meta charset="utf-8" />
   <!-- <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css" /> -->
    <link rel="stylesheet" href="css/main.css" />
</head>
<body>
  <header class="logo">
    <h2 style="color: #fff; font-weight: 700; font-size: 20px;">
      <span style="padding: 10px;" class="glyphicon glyphicon-info-sign"></span>Sovelluksen tiedot
    </h2>
    <span class="close" style="margin-right: 15px; color: #ffffff;">&times;</span>
  </header>
  <div id="info-content">
    <div class="infobtn-container">
      <button id="btn-kayttoohje" class="active">Käyttöohje</button>
      <button id="btn-versiotiedot" >Versiotiedot</button>
      <button id="btn-yhteystiedot" >Yhteystiedot</button>
    </div>
  
  <div id="kayttoohje" class="infopage">
    
    
     <p>  <p>
      Vexline käyttöliittymällä on mahdollista suorittaa kaikki VKM-rajapinnan tarjoamat muunnokset. Se korvaa aikaisemmin käytössä olleet Tatun ja VKM-Excelin. 
      <b>Vexline käyttää toistaiseksi vain ETRS89/TM35FIN(E,N)-koordinaattijärjestelmää.</b>
    </p>  
  
    <p>
      <b>
        Vexline sisältää uusia ominaisuuksia. Käyttäjä voi nyt valita, mitä arvoja hän haluaa rajapinnan palauttavan. 
        Tämän lisäksi käyttöliittymän avulla on nyt mahdollista saada myös piste- tai viivageometria (WKT tai GPKG), lineaarilokaatio sekä rataosoitetietoja. 
        Myös hakuja tarkentavia valinnaisia VKM parameterejä voi käyttää käyttöliittymässä. 
          Toisin sanoen, Vexlinen avulla voidaan vapaasti muuntaa pistemäisten tai viivamaisten kohteiden sijainteja viitekehyksestä toiseen niin, 
          että kohteiden lisäominaisuudet, esimerkiksi nopeusrajoitukset ja päällystetiedot, säilyvät muunnoksen läpi ja liittyvät omien kohteidensa tulosriveihin.
        </u>
      </b>
    </p>
  
          <p>
      Muunnettavat tiedot syötetään Excel- tai CSV-tiedostopohjaan, joka lähetetään sovellukselle. Se valitsee
      muunnostyypin automaattisesti muunnettavan tiedoston sarakkeiden perusteella ja
      palauttaa muunnetun tiedoston, johon on lisätty muunnoksen lopputuloksen sisältävät sarakkeet. 
      Rivit, joiden muuntaminen epäonnistui, sisältävät VKM:n antamat virheviestit ja ovat ladattavissa onnistuneiden tulosrivien rinnalla. 
      Muuntimen palauttamaa taulukkoa ei kannata lähettää uudestaan.
    </p>
  
          <p>Tiedostossa saa olla vain yksi taulukko (eli välilehti). Tiedoston nimessä ei saa olla välilyöntejä.</p>
  
    <p>Valinnaisia parametrejä voi lisätä taulukkoon esimerkkitiedoston mukaisesti sijoitamalla parametrin nimen sarakkeen otsikkoriville ja liittämällä arvot sarakkeen alempiin soluihin muunnoskohteen mukaisesti. 
      Käytä ainoastaan vkm-rajapintakuvauksessa määriteltyjä parametrejä</p>
  
    <p>Tarkemmat ohjeet käytettävistä parametreistä, niiden yhdistelystä sekä VKM-rajapinnan toiminnasta löydät <a href="//vayla.fi/documents/25230764/39766119/Viitekehysmuunnin+rajapintakuvaus.pdf/771c824f-c168-0973-e03c-881c1b04e3a9/Viitekehysmuunnin+rajapintakuvaus.pdf?t=1696316684442" target="_blank">Viitekehysmuuntimen rajapintakuvauksesta</a> </p><br/><br/>
  
          <p>Muunnoksissa käytetään ETRS-TM35FIN-tasokoordinaatteja. X on itäkoordinaatti ja Y pohjoiskoordinaatti.
          Muunnettavien tietojen desimaalierottimena voi olla pilkku tai piste.</p>
          
          <p>Käytössä havaitut muunnosten enimmäisrivimäärät:</p>
          <ul>
          <li>Pistemäisille 50 000 riviä.
          <li>Tieosoiteväleille 50 000 riviä.
          </ul>
  
    <p>Vexline muunnoksia voi hyödyntää myös QGIS:sissa:</p>
          <ul>
          <li>1. Suorita excel muunnos normaalisti.
          <li>2. Avaa QGIS ja valitse sopiva projekti
          <li>3. CSV: Avaa tietolähteiden hallinta ja valitse Eroteltu teksti. GPKG: Valitse GeoPackage.</li>
          <li>4. Valitse tulostiedosto (.csv tai .gpkg) tiedoston nimeksi ja valitse muunnetuille csv-tiedoille sopivat asetukset.</li>          
          <li>5. Paina lisää ja tietojen pitäisi ilmestyä projektiin.
          </ul>
  
          <p><br/></p>
  
          <h4>Muunnoskohtaisia ohjeita</h4>
          
          <u>Koordinaattien muuntaminen</u>
  
          <p>Munnoksessa käytetään oletuksena 100 metrin hakusädettä, mutta sen voi muuttaa haluttuun arvoon. Sovellus palauttaa sen sisältä löytyvän
          lähimmän tieosoitteen ja katuosoitteen. Ne voivat sijaita eri kohdissa.</p>
  
          <u>Tieosoitteiden muuntaminen</u>
  
          <p>Alku- ja loppupisteen voi antaa kummassa järjestyksessä tahansa.</p></p>
  </div>

  <!-- Content for Versiotiedot -->
  <div id="versiotiedot" class="infopage">
    <b>v 1.3 10.7.2024</b>
    <br/>
    Keskeisimmät muutokset:<br/>
    <ul>
      <li>- Muunnettavat tiedostot eivät enää tarvitse yksilöivää tunnistetta. Vexline luo rivejä yksilöivän "tunniste"-kentän automaattisesti, mikäli se puuttuu muunnettavasta tiedostosta. <b>Huom! "tunniste"-kenttä on tällä hetkellä varattu Vexlinelle</b></li>
      <li>- Mahdollisuus säilyttää alkuperäisiä tieosoitteita. Ne näkyvät tulostiedostossa "_original"-päätteillä.</li>
      <li>- Historiamuunnoksen (tieverkon ajanhetkestä toiseen) tulostiedostossa näkyy käyttäjän valitsema tilanne- ja kohdepäivämäärä.</li>
      <li>- Uusi "Tieosoite"-palautusarvo, jonka avulla tulostiedostosta jätetään pois kaikki "ylimääräiset" Vexline-kentät, kuten "vaylan_luonne" ja "hallinnollinen_luokka".</li>
      <li>- Useampaan virhetilanteeseen on liitetty uudet vastaavat virheilmoitukset, jotka auttavat selvittämään virheen syyn.</li>
      <li>- Seuraavia kenttiä ei enää lisätä tulostiedostoon: "tie_loppu", "tietyyppi" ja "tietyyppi_loppu".</li>
      <li>- Vexline tukee nyt seuraavien Vexline-kenttien arvoja myös tekstinä: "ely", "hallinnollinen_luokka" ja "ajorata". Esim. Keski-Suomen ELY:n voi merkata kolmella eri arvolla: "kes", "9" tai "keski-suomi". Kirjainten koolla ei ole väliä.</li>

    </ul>
    Korjauksia:<br/>
    <ul>
      <li>- Pitkät tiedostonimet eivät enää ylitä tietolaatikon reunoja vaan jatkuvat seuraavalla rivillä.</li>
      <li>- Korjattu tilanne, jossa GPKG-tulostiedosto ei saanut latin1-koodausta, mikä johti joidenkin arvojen häviämiseen tai vääristymiseen.</li>
      <li>- Lukuisia muita korjauksia ja kirjastojen päivityksiä.</li>
    </ul>

    <br/>
    <br/>
    <b>v 1.2 3.4.2024</b>
    <br/>
    Keskeisimmät muutokset:<br/>
    <ul>
      <li>- Viivojen suunta yksittäisen MutliLineString-geometrian sisällä yhtenäistetään – viiva alkaa edellisen loppupisteestä.</li>
      <li>- Ensimmäinen viiva (LineString/MultiLineString) alkaa aina sen tulosjoukon alkukoordinaateista. Tavoitteena varmistaa, että geometria kulkee tieosoitteen kasvusuunnan mukaisesti.</li>
      <li>- Muunnosta rajaavan "ajorata"-parametrin kenttään on mahdollista syöttää useampi ajoratanumero. Esim. "0,1"</li>
      <li>- Koordinaattivälin muuntaminen tieosoiteväliksi. "Tie"-parametria voi käyttää muunnoksen "pakottamiseen" tietylle tielle.</li>
      <li>- Käyttöohjeita ja esimerkkitiedostoja päivitetty.</li>
      <li>- Kentät "aetaisyys", "letaisyys", "alkuet<b>ä</b>isyys" ja "loppuet<b>ä</b>isyys" ovat lisätty tuettujen tieosoitekenttien joukkoon.</li>
      <li>- "Alueet"-palautusarvo on valittavissa myös "Koordinaattien muuntaminen" -polulla.</li>
    </ul>
    Korjauksia:<br/>
    <ul>
      <li>- Korjattu tilanne, jossa palvelimen vastaus kestää liian kauan isoa tiedostoa muuntaessa, eikä tulostiedostoa pysty ladata.</li>
      <li>- Pisteet tiedostonimessä eivät aiheuta enää ongelmia.</li>
      <li>- Parannettu virheellisten VKM-vastausten käsittelyä.</li>
      <li>- Parannettu palvelimen responsiivisuutta.</li>
    </ul>

    <br/>
    <br/>
    <b>v 1.1 15.12.2023</b>
    <br/>
    Uudet ominaisuudet:<br/>
    <ul>
      <li>- Maksimi sallittu rivimäärä nostettu 50 000 riviin.</li>
      <li>- Tulostiedoston muodoksi voi valita GeoPackage.</li>
      <li>- Muunnettavan tiedoston tieosoitekenttiä voi antaa eri muodossa: <i>{tie/tienumero}, {aosa/alkuosa/osa}, {ajr/ajoratanumero/ajorata}, {aet/alkuetaisyys/etaisyys}, {losa/loppuosa/osa_loppu}...</i>
      Samassa tiedostossa voi käyttää eri tieosoiteformaatin kenttiä eikä niiden järjestyksellä tai kirjainten koolla ole merkitystä. Muotoilu säilytetään muunnoksen läpi.</li>
      <li>- Haussa on mahdollista käyttää valinnaisia tarkentavia ja rajaavia parametreja: ajorata, väylän luonne, säde, tilannepvm ja kohdepvm.</li>
      <li>- Tulostiedoston tieosoitekentät ovat "järkevässä" järjestyksessä: <i>1. Alkupisteen tieosoitekentät 2. Loppupisteen tieosoitekentät 3. Muut alkupisteen kentät.</i></li>
    </ul>

    <br/>
    <br/>
    <b>v 1.0 23.10.203</b>
    <br/>
    - Version 1.0 julkaisu. Tehty muutoksia mm. käyttöliittymiin koekäytön palautteiden perusteella.

    <br/>
    <br/>
    <b>v 0.1 5.10.2023</b>
    <br/>
    - Versio 0.1 koekäyttöön
  </div>

 <!-- Content for Yhteystiedot -->
  <div id="yhteystiedot" class="infopage">

    <p>Sovelluksesta vastaa Väylävirasto. Palautetta toivotaan lähetettävän osoitteeseen <a href="mailto:paikkatieto@vayla.fi">paikkatieto@vayla.fi</a>.</p>
   
  </div>

</div>

  <script src="js/main.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/mobile/1.5.0-alpha.1/jquery.mobile-1.5.0-alpha.1.min.js"></script>
  <script>
            // Fetch the JSON data when the page loads
            window.onload = function() {
          fetch('fi.json')
              .then(response => response.json())
              .then(data => {
                jsonData = data;
                  // Populate the page elements with the fetched data
                  document.getElementById('logo-title').textContent = data.logo.title;
              });
      };
  </script>
  </body>
</html>